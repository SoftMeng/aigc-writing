#!/usr/bin/env python3
"""
使用subprocess批量生成图片
"""

import os
import subprocess
import sys

# 提示词列表
prompts = [
    # 1. 甘雨Coser - 冰霜法师战斗
    """极致电影级游戏战斗插画，竖屏构图。画面中是甘雨Coser化身的真正游戏女角色，蓝白色渐变长发如瀑布般飘舞，发丝间闪烁着蓝色粒子光芒，冷冽而神圣。她身着蓝色星空法袍，袍角在能量风暴中猎猎作响，手中紧握冰晶法杖，法杖顶端镶嵌着会呼吸的蓝色晶体，内部粒子如星河流动。法杖挥舞间带出扇形冰晶风暴，每一片冰晶都折射出彩虹光芒。她的眼神坚毅而专注，瞳孔中映射出战斗的决心，眉头微蹙，嘴角却挂着自信的弧度。法杖周围环绕着六边形冰晶符文阵列，粒子从法杖尖端喷射而出，在空中凝聚成锋利的冰棱箭矢，如雨点般射向敌人。战斗姿态英姿飒爽，身体微微后仰保持平衡，一只脚向前踏出形成稳定的三角站位。背景是粒子实验室的金色空间，但被她的冰霜领域染成冰蓝与金色交织的奇幻色彩。整体色调冷艳高贵，光影运用伦勃朗式明暗对比，高光聚焦在法杖和面部，阴影强调战斗的紧张感。发丝动态光泽处理，肌肤质感如玉石般晶莹剔透，战斗衣袍的丝绸刺绣纹理清晰可见。画面充满压迫感与动态张力，完美捕捉冰霜法师的战斗瞬间。极度详细，超高分辨率，8K画质，顶级游戏美术水准。""",

    # 2. 可莉Coser - 爆破少女战斗
    """极致电影级游戏战斗插画，竖屏构图。画面中是可莉Coser化身的真正游戏女角色，褐色双马尾在爆炸气流中狂乱飞舞，发梢被火焰染成金红，闪烁着红色粒子火花。她身着特制爆破工装服，胸口装备着会发光的红色核心装置，裙摆采用防火材质设计成不规则碎片状。她的双手各握一枚粒子能量弹，能量弹内部是旋转的红色星云，外部包裹着不稳定的高能粒子场。眼神中带着淘气与兴奋，眉毛上扬，嘴角露出坏笑，战斗姿态极其活泼，一只脚踩在漂浮的岩石碎块上，身体前倾，双手将能量炸弹高举过头。能量炸弹在她手中嗡嗡作响，红色粒子如鲜血般从指缝溢出，在空中划出炽热的尾迹。周围漂浮着刚刚爆炸产生的粒子碎片，有的形成心形，有的形成星星，每一颗都在发光。背景是粒子实验室的金属墙壁被炸出裂缝，裂缝中透出金色光芒。她的表情既天真又危险，战斗时的兴奋感通过微微张开的嘴唇和闪亮的眼睛完美传达。整体色调热情如火，爆炸产生的粒子光照亮了整个场景，形成强烈的明暗对比。衣料纹理、皮肤毛孔、爆炸粒子轨迹都极度详细。动态模糊效果捕捉爆炸瞬间的冲击感。8K超高清，游戏级美术品质。""",

    # 3. 胡桃Coser - 枪舞战士战斗
    """极致电影级游戏战斗插画，竖屏构图。画面中是胡桃Coser化身的真正游戏女角色，褐色短发在战斗气流中如火焰般飞扬，发丝间缠绕着红色粒子火星。她身着改良版火红战衣，裙甲采用多层花瓣式设计，每一层都燃烧着不灭的火焰纹理。双手紧握那把标志性的火焰骑枪，枪身由暗红色金属锻造，表面铭刻着古老符文，枪尖如盛开的彼岸花，蕴含着死亡与重生的力量。骑枪在她手中如臂使指，挥舞间带出炽热的红色粒子流，粒子在空中凝聚成翩翩起舞的蝴蝶，每一只蝴蝶都拖着长长的火焰尾巴。她的眼神锐利而狂热，瞳孔中燃烧着战斗的火焰，嘴角上扬露出自信且略带疯狂的笑容。战斗姿态极其优雅与危险并存，身体如陀螺般旋转，一只脚尖点地，另一只脚向后伸展形成完美的平衡姿势。骑枪在旋转中划出优美的弧线，红色粒子如花瓣雨般洒落。背景被她战斗的气场所扭曲，粒子实验室的空间出现金色裂痕，裂痕中飞出更多火焰蝴蝶。她的表情充满对战斗的渴望，既有少女的活泼，又有战士的冷峻。整体色调红金交织，热烈而高贵，光影效果如油画般浓郁。衣料丝绸质感、皮肤细腻纹理、火焰粒子动态效果极度逼真。8K画质，顶级游戏原画水准。""",

    # 4. 宵宫Coser - 烟花弓箭手战斗
    """极致电影级游戏战斗插画，竖屏构图。画面中是宵宫Coser化身的真正游戏女角色，火红色长发在战斗气流中如晚霞般飘扬，发丝间闪烁着橙色粒子星火，如夏夜萤火虫般美丽。她身穿改良版夏日祭典和服，裙摆设计成烟花绽放的形状，布料上绣满了金色烟花图案，随着她的移动仿佛在闪烁。手中握着一把巨大的弓，弓身由会呼吸的火焰木制成，弓弦是用星尘编织而成，在月光下散发着微弱的银光。弓身上镶嵌着橙色晶体，晶体内部是旋转的粒子星云，弓弦被拉满如满月，箭矢是由凝聚的烟花粒子组成，箭头是一颗跳动的心脏形火星。她的眼神温柔而坚定，瞳孔中倒映着战斗的星河，眉毛微弯，嘴角挂着温暖而自信的微笑。战斗姿态优雅如舞蹈，身体侧立形成优美曲线，一只手稳稳拉弓，另一只手轻扶箭矢，指尖与弓弦接触处迸发出橙色粒子火花。箭矢蓄势待发，周围环绕着七颗未发射的烟花粒子，如卫星般旋转。背景是粒子实验室被她的光芒染成绚烂的橙红色，天空中似乎已经有烟花在绽放。她的表情专注而享受，战斗对她来说如同创作艺术。整体色调温暖明亮，烟花粒子光照效果如梦似幻，光影处理采用柔和的逆光效果。发丝、衣料、皮肤纹理极度清晰。8K超清，游戏级顶级美术。""",

    # 5. 莫娜Coser - 星占师战斗
    """极致电影级游戏战斗插画，竖屏构图。画面中是莫娜Coser化身的真正游戏女角色，深蓝色短发如夜空中漂浮的海浪，发丝间闪烁着深蓝色粒子星辰，宛若银河倾泻而下。她身着星空占卜师法袍，裙摆上绣满了旋转的星座图案，每一颗星星都在微微发光，随着她的呼吸明暗交替。手中抱着那神秘的水晶球，球体内部是深邃的宇宙星云，紫色与深蓝交织，星云中有无数星系在旋转。水晶球悬浮在她面前，缓缓自转，发出幽蓝的占卜光芒。她的眼神深邃而神秘，瞳孔中仿佛倒映着整个宇宙，眉宇间透着智者的沉静，嘴角带着若有若无的神秘微笑。战斗姿态从容优雅，身体微微侧倾，一只手轻抚水晶球表面，另一只手在虚空中绘制星图。指尖所过之处留下发光的星轨，星轨在空中组成复杂的占卜符文，符文由深蓝色粒子构成，缓慢旋转并向外扩散。水晶球中飞出无数星尘粒子，在空中凝聚成不同星座的形状——天蝎座、双子座、摩羯座，每一颗星都在精准定位敌人的方位。背景是粒子实验室被星云笼罩，墙壁上投射出十二星座的巨型投影。她的表情冷静而自信，战斗对她而言是一场精密的占卜仪式。整体色调深邃神秘，采用深蓝与紫色为主调，点缀金色星光，光影处理如星空般深邃立体。衣料星纹、皮肤肌理、星云粒子极度逼真。8K画质，顶级艺术水准。""",

    # 6. 纳西妲Coser - 草神战斗
    """极致电影级游戏战斗插画，竖屏构图。画面中是纳西妲Coser化身的真正游戏女角色，纯白色长发如月光瀑布般垂落，发梢泛着淡淡的翠绿，如初生嫩芽。她身着翠绿与金色交织的神圣法袍，裙摆设计成盛开花朵的形状，每一朵花瓣都由发光的绿色粒子构成，随风轻轻摇曳。她的十指修长白皙，指尖散发着柔和的绿光，如沐春风。十指张开间，无数绿色粒子如种子般飘出，在空中生根发芽，生长成藤蔓、花朵、树木，形成一个完整的生态系统。她的眼神慈悲而智慧，瞳孔如翡翠般清澈，眉眼间透着对众生的温柔，嘴角挂着温暖而平静的微笑。战斗姿态静谧而强大，身体悬浮于地面之上，双腿交叠盘坐于由藤蔓编织的莲座之上。双手在胸前合十，指尖相对形成一个三角形能量场，能量场中是一颗翠绿的生命之种，种子正在发芽成长。周围的植物在战斗中被激活，藤蔓如灵蛇般出击，花朵释放出治愈与攻击兼备的花粉，树木伸展枝叶形成保护屏障。背景是粒子实验室被她的神力改造成生机盎然的绿色森林，墙壁上长满了发光的苔藓和藤蔓。她的表情平静而庄严，战斗对她而言是一种生命力的展现。整体色调以翠绿为主，点缀金色光芒，光影处理如阳光透过森林树冠，柔和而充满生机。发丝、衣料、植物纹理极度清晰。8K超清，艺术级水准。""",

    # 7. 妮露Coser - 舞姬战斗
    """极致电影级游戏战斗插画，竖屏构图。画面中是妮露Coser化身的真正游戏女角色，淡粉色长发在战斗气流中如涟漪般荡漾，发丝间闪烁着蓝色粒子水光，如晨露般晶莹。她身着水蓝色舞姬华服，裙摆设计成层层叠叠的水波形状，每一层都在流动，如真实的水波在阳光下闪烁。舞衣上绣着月牙和星辰的图案，随着她的移动仿佛在夜空下舞蹈。她正在战斗，但战斗对她而言是一场绝美的舞蹈。身体如柳枝般柔软，做出高难度的舞蹈动作，一条腿向后伸展如天鹅，另一只腿支撑全身平衡。双臂如流水般挥舞，在空中划出优美的弧线，每一次挥手都带出蓝色粒子水花，水花在阳光下折射出彩虹光芒。她的眼神妩媚而专注，瞳孔如深潭般神秘，眉毛轻挑，嘴角挂着神秘的微笑，战斗的激情通过微微发红的脸颊和轻启的嘴唇完美展现。身体周围环绕着旋转的水粒子环，粒子环随她的舞步加速旋转，形成一个保护性的水幕。背景是粒子实验室被她的舞步影响，空间出现涟漪状波纹，地板上倒映出她舞动的身影。她的表情既享受又认真，舞蹈就是她最强大的武器。整体色调以水蓝为主，粉色发丝点缀其间，光影效果如月光洒在水面，波光粼粼。舞衣丝绸质感、水粒子动态、肌肤光泽极度逼真。8K画质，顶级艺术水准。""",

    # 8. 云堇Coser - 京剧武生战斗
    """极致电影级游戏战斗插画，竖屏构图。画面中是云堇Coser化身的真正游戏女角色，黑色长发在战斗气流中如墨云翻涌，发髻上插着的珠翠首饰叮当作响。她身着传统京剧武生战袍，战袍采用明艳的绿色与金色为主调，绣满龙纹与云纹图案，衣袍在战斗中猎猎作响，仿若游龙在云中翻腾。她的双手如兰花般绽放，做出京剧中的经典武打手势，每一根手指都在讲述一个战斗故事。指尖金色粒子如粉末般飘散，在空中组成各种戏曲脸谱——关公的丹凤眼、张飞的豹头环眼、曹操的奸诈笑容。她的眼神锐利而投入，瞳孔中映射出舞台的光芒，眉毛如利剑般上挑，嘴角带着京剧特有的韵味微笑。战斗姿态极具戏曲美感，身体做出经典的起霸姿势，双脚分开与肩同宽，重心下沉，一只手向前推出如推窗望月，另一只手向后拉如亮相出场。周围环绕着金色粒子组成的戏曲虚拟道具——青龙偃月刀、丈八蛇矛、方天画戟，每一件都在围绕她旋转。她的表情投入而享受，战斗对她而言是一场精心准备的演出。背景是粒子实验室被她的气场所改变，墙壁上投影出巨大的戏曲舞台幕布，幕布上写着战斗的剧名。整体色调以明绿与金色为主，黑色长发点缀其间，光影处理采用强烈的舞台灯光效果，明暗对比鲜明。衣料刺绣、脸谱纹理、粒子道具极度清晰。8K超清，艺术级水准。""",

    # 9. 申鹤Coser - 冰封战士战斗
    """极致电影级游戏战斗插画，竖屏构图。画面中是申鹤Coser化身的真正游戏女角色，银白色长发在战斗气流中如冰锥般刺向天空，发丝间闪烁着白色冰晶粒子，如极光般绚丽。她身着银蓝色战甲，战甲采用冰晶一体化设计，每一片甲胄都由透明冰晶构成，内部封印着永不融化的冰霜能量。战甲边缘如羽毛般锋利，随着她的移动轻轻颤动，如仙鹤展翅。她的身体周围悬浮着六把冰晶飞剑，飞剑如卫星般绕她旋转，每一把剑身都由纯粹的冰霜粒子凝聚而成，散发着刺骨的寒气。她的眼神冷峻而坚定，瞳孔如冰湖般深不可测，眉毛如冰峰般冷峻，嘴角紧抿成一条直线，战斗的冷酷通过微皱的眉心和专注的眼神完美传达。战斗姿态沉稳如山，身体如磐石般稳定，双脚分开与肩同宽，重心如下钉入大地般稳固。双手在胸前结印，指尖相对形成一个三角形冰霜法阵，法阵中飞出无数冰晶飞镖，如暴风雪般射向敌人。冰晶飞镖在空中留下白色的尾迹，尾迹如极光般美丽。周围的温度急剧下降，空气中凝结出冰霜粒子，在阳光下折射出七彩光芒。背景是粒子实验室被她冻结，墙壁上结满了美丽的冰花，地板上铺满了晶莹的冰层。她的表情冷静而专注，战斗对她而言是一种修行。整体色调以银白为主，蓝色冰晶点缀其间，光影处理采用强烈的冷光效果，冰霜质感极其逼真。战甲纹理、冰晶结构、肌肤毛孔极度清晰。8K超清，顶级游戏原画水准。""",

    # 10. 神里绫华Coser - 冰华剑客战斗
    """极致电影级游戏战斗插画，竖屏构图。画面中是神里绫华Coser化身的真正游戏女角色，蓝白色长发在战斗气流中如瀑布般倾泻，发丝间闪烁着冰蓝色粒子光芒，如月华般清冷。她身着冰雪和服，外罩银白轻甲，甲胄上绣着冰霜花纹，每一朵冰花都在微微发光。和服的下摆如花瓣般层叠展开，随风轻轻飘动，宛若盛开的白莲。她单手握持那把寒冰太刀，太刀刀身由万年寒冰锻造，通体透明，内部封印着永不融化的冰霜能量。刀刃如镜般光滑，反射着战斗的光芒，刀柄上缠着蓝色的丝绸绑带，绑带在气流中轻轻飘舞。她的眼神优雅而锐利，瞳孔如冰湖般清澈，眉如远山般舒缓，嘴角带着淡淡的笑意却透出不容小觑的威严。战斗姿态极致优雅，身体侧立形成完美曲线，双脚一前一后保持平衡，重心微微下沉。一只手握刀于身侧，刀尖朝下，另一只手在胸前做剑指诀。刀身周围环绕着旋转的冰晶花瓣，花瓣由冰霜粒子组成，每一片都在发光，如梦似幻。她的表情专注而从容，战斗对她而言是一种艺术。挥刀瞬间，寒气如潮水般涌出，在空中凝聚成巨大的冰花图案，冰花缓缓旋转，每一个花瓣都锋利如刀刃。冰花在阳光下折射出七彩光芒，如极光般绚丽。背景是粒子实验室被她的冰霜领域覆盖，空气中飘落着晶莹的雪花，雪花在灯光下如钻石般闪耀。她的姿态优雅如贵族公主，战斗的凌厉与她的气质完美融合。整体色调以银白为主，冰蓝与淡粉点缀其间，光影处理采用柔和的逆光效果，冰晶质感极其逼真。发丝纹理、衣料丝绸、刀身冰晶极度清晰。8K超清，艺术级水准。"""
]

# 角色名称
char_names = [
    "甘雨",
    "可莉",
    "胡桃",
    "宵宫",
    "莫娜",
    "纳西妲",
    "妮露",
    "云堇",
    "申鹤",
    "神里绫华"
]

# 输出目录
output_dir = "/Users/xiangyuanmeng/Documents/TowerProject2/aigc-writing/我逛漫展的那些年/插图/第33章"

# 确保输出目录存在
os.makedirs(output_dir, exist_ok=True)

# 生成命令
script_path = "/Users/xiangyuanmeng/Documents/TowerProject2/aigc-writing/.claude/skills/comfyui-image-generation/scripts/generate.py"

print("开始生成第33章战斗插图...")
print(f"输出目录: {output_dir}\n")

for i, (prompt, name) in enumerate(zip(prompts, char_names), 1):
    print(f"[{i}/10] 正在生成 {name}Coser 的战斗图片...")

    # 构建命令
    cmd = [
        sys.executable,
        script_path,
        prompt,
        "--output_dir", output_dir,
        "--prefix", f"第33章_{name}",
        "--height", "1536",  # 竖图
        "--width", "768",
        "--steps", "20"
    ]

    try:
        result = subprocess.run(cmd, capture_output=True, text=True, timeout=300)

        if result.returncode == 0:
            print(f"  ✓ 成功生成")
            if result.stdout:
                print(f"  {result.stdout.strip()}")
        else:
            print(f"  ✗ 失败: {result.stderr}")
    except subprocess.TimeoutExpired:
        print(f"  ✗ 超时")
    except Exception as e:
        print(f"  ✗ 错误: {e}")

print("\n全部完成！")
